<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DreamWeaver - Text to Image</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: "Segoe UI", sans-serif; }
    body {
      background: linear-gradient(135deg, #6e00ff, #00c3ff);
      color: white;
      min-height: 100vh;
      padding: 20px;
    }
    header {
      text-align: center;
      font-size: 2.5em;
      font-weight: bold;
      margin-bottom: 20px;
      animation: fadeIn 1.5s ease-out;
    }
    .prompt-box {
      display: flex;
      flex-direction: column;
      gap: 10px;
      max-width: 600px;
      margin: auto;
    }
    textarea {
      resize: none;
      padding: 12px;
      font-size: 1em;
      border-radius: 12px;
      border: none;
      outline: none;
    }
    select, button {
      padding: 10px;
      font-size: 1em;
      border: none;
      border-radius: 10px;
      cursor: pointer;
    }
    .actions {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
    }
    .actions button {
      background: white;
      color: #6e00ff;
      font-weight: bold;
      transition: transform 0.2s ease;
    }
    .actions button:hover {
      transform: scale(1.05);
    }
    .image-grid {
      margin-top: 30px;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
    }
    .image-grid img {
      width: 100%;
      border-radius: 15px;
      box-shadow: 0 0 10px #0005;
      animation: popIn 0.6s ease;
    }
    @keyframes popIn {
      from { opacity: 0; transform: scale(0.9); }
      to { opacity: 1; transform: scale(1); }
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @media (max-width: 600px) {
      header { font-size: 1.8em; }
    }
  </style>
</head>
<body>

  <header>‚ú® DreamWeaver - Text to Image ‚ú®</header>

  <div class="prompt-box">
    <textarea id="prompt" rows="3" placeholder="Enter your creative prompt here..."></textarea>

    <select id="style">
      <option value="auto">Auto</option>
      <option value="realistic">Realistic</option>
      <option value="digital art">Digital Art</option>
      <option value="painting">Painting</option>
      <option value="anime">Anime</option>
      <option value="3d render">3D Render</option>
      <option value="minimalist">Minimalist</option>
      <option value="black and white">Black & White</option>
      <option value="sketch">Sketch</option>
    </select>

    <div class="actions">
      <button onclick="generateImages()">üé® Generate</button>
      <button onclick="randomPrompt()">üé≤ Random</button>
      <button onclick="enhancePrompt()">‚ú® Enhance Prompt</button>
    </div>
  </div>

  <div class="image-grid" id="imageGrid">
    <!-- Images will appear here -->
  </div>

  <script>
    const apiKey = "AIzaSyCsubB93qbX3oinDnV4T3DcZHu8F7hU6jE";

    const randomPrompts = [
      "A futuristic city floating above the clouds",
      "Cute cat in a spacesuit exploring Mars",
      "Dreamy purple forest with glowing fireflies",
      "Cyberpunk girl with neon lights",
      "Ancient temple in a stormy jungle",
      "Minimalist black and white portrait",
      "Anime-style wizard casting a spell"
    ];

    function randomPrompt() {
      const prompt = randomPrompts[Math.floor(Math.random() * randomPrompts.length)];
      document.getElementById('prompt').value = prompt;
    }

    function enhancePrompt() {
      const promptBox = document.getElementById('prompt');
      if (promptBox.value.trim() !== '') {
        promptBox.value += ", ultra detailed, high quality, cinematic lighting, 8K";
      }
    }

    async function generateImages() {
      const prompt = document.getElementById('prompt').value.trim();
      const style = document.getElementById('style').value;

      if (!prompt) {
        alert("Please enter a prompt.");
        return;
      }

      const grid = document.getElementById('imageGrid');
      grid.innerHTML = "<p>‚è≥ Generating images...</p>";

      try {
        const requestBody = {
          contents: [{
            role: "user",
            parts: [{
              text: `${prompt}, style: ${style}`
            }]
          }]
        };

        const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-pro-vision:generateContent?key=${apiKey}`, {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify(requestBody)
        });

        const result = await response.json();
        const base64images = result.candidates?.[0]?.content?.parts?.filter(p => p.inline_data)?.map(p => p.inline_data.data) || [];

        if (base64images.length > 0) {
          grid.innerHTML = "";
          base64images.slice(0, 4).forEach(data => {
            const img = document.createElement("img");
            img.src = `data:image/png;base64,${data}`;
            grid.appendChild(img);
          });
        } else {
          grid.innerHTML = "<p>‚ùå No images returned. Try again.</p>";
        }
      } catch (error) {
        grid.innerHTML = "<p>‚ö†Ô∏è Error: " + error.message + "</p>";
      }
    }
  </script>
</body>
</html>
